/*Toastify js 1.11.2*/
!function(t,o){"object"==typeof module&&module.exports?module.exports=o():t.Toastify=o()}(this,(function(t){var o=function(t){return new o.lib.init(t)};function i(t,o){return o.offset[t]?isNaN(o.offset[t])?o.offset[t]:o.offset[t]+"px":"0px"}function s(t,o){return!(!t||"string"!=typeof o)&&!!(t.className&&t.className.trim().split(/\s+/gi).indexOf(o)>-1)}return o.lib=o.prototype={toastify:"1.10.0",constructor:o,init:function(t){return t||(t={}),this.options={},this.toastElement=null,this.options.text=t.text||"Hi there!",this.options.node=t.node,this.options.duration=0===t.duration?0:t.duration||3e3,this.options.selector=t.selector,this.options.callback=t.callback||function(){},this.options.destination=t.destination,this.options.newWindow=t.newWindow||!1,this.options.close=t.close||!1,this.options.gravity="bottom"===t.gravity?"toastify-bottom":"toastify-top",this.options.positionLeft=t.positionLeft||!1,this.options.position=t.position||"",this.options.backgroundColor=t.backgroundColor,this.options.avatar=t.avatar||"",this.options.className=t.className||"",this.options.stopOnFocus=void 0===t.stopOnFocus||t.stopOnFocus,this.options.onClick=t.onClick,this.options.offset=t.offset||{x:0,y:0},this.options.escapeMarkup=void 0===t.escapeMarkup||t.escapeMarkup,this.options.style=t.style||{},this.options.style.background=this.options.style.background||t.backgroundColor,this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var t=document.createElement("div");t.className="toastify on "+this.options.className,this.options.position?t.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(t.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):t.className+=" toastify-right",t.className+=" "+this.options.gravity;for(const o in this.options.style)t.style[o]=this.options.style[o];if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)t.appendChild(this.options.node);else if(this.options.escapeMarkup?t.innerText=this.options.text:t.innerHTML=this.options.text,""!==this.options.avatar){var o=document.createElement("img");o.src=this.options.avatar,o.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?t.appendChild(o):t.insertAdjacentElement("afterbegin",o)}if(!0===this.options.close){var s=document.createElement("span");s.innerHTML="&#10006;",s.className="toast-close",s.addEventListener("click",function(t){t.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var n=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&n>360?t.insertAdjacentElement("afterbegin",s):t.appendChild(s)}if(this.options.stopOnFocus&&this.options.duration>0){var e=this;t.addEventListener("mouseover",(function(o){window.clearTimeout(t.timeOutValue)})),t.addEventListener("mouseleave",(function(){t.timeOutValue=window.setTimeout((function(){e.removeElement(t)}),e.options.duration)}))}if(void 0!==this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var a=i("x",this.options),r=i("y",this.options),p="left"==this.options.position?a:"-"+a,l="toastify-top"==this.options.gravity?r:"-"+r;t.style.transform="translate("+p+","+l+")"}return t},showToast:function(){var t;if(this.toastElement=this.buildToast(),!(t="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";return t.insertBefore(this.toastElement,t.firstChild),o.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(t){t.className=t.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),o.reposition()}.bind(this),400)}},o.reposition=function(){for(var t,o={top:15,bottom:15},i={top:15,bottom:15},n={top:15,bottom:15},e=document.getElementsByClassName("toastify"),a=0;a<e.length;a++){t=!0===s(e[a],"toastify-top")?"toastify-top":"toastify-bottom";var r=e[a].offsetHeight;t=t.substr(9,t.length-1);(window.innerWidth>0?window.innerWidth:screen.width)<=360?(e[a].style[t]=n[t]+"px",n[t]+=r+15):!0===s(e[a],"toastify-left")?(e[a].style[t]=o[t]+"px",o[t]+=r+15):(e[a].style[t]=i[t]+"px",i[t]+=r+15)}return this},o.lib.init.prototype=o.lib,o}));var pastMsg="",$t=2e3,toast={success:function(t){if(t!==pastMsg){pastMsg=t;var o=150*t.length;o<$t&&(o=$t),Toastify({text:t,duration:o,gravity:"bottom",position:"left",backgroundColor:"green"}).showToast()}},error:function(t){if(t!==pastMsg){pastMsg=t;var o=150*t.length;o<$t&&(o=$t),Toastify({text:t,duration:o,gravity:"bottom",position:"left",backgroundColor:"red"}).showToast()}},info:function(t){if(t!==pastMsg){pastMsg=t;var o=150*t.length;o<$t&&(o=$t),Toastify({text:t,duration:o,gravity:"bottom",position:"left",backgroundColor:"royalblue"}).showToast()}}};
/*!general_tools.js*/
var hideClass="hide",userTypeObj={BUSINESS:"business",REGULAR:"regular",TEMPORARY:"temporary",GUEST:"guest"},profileTypeObj={BUSINESS:"business",SITE:"site"},MAX_TEMPORARY_FAV=100,MAX_TEMPORARY_PROFILE=50,MAX_FOLLOW_SCROLL_QTY=3,STATIC_FILE_PATH={site:"/static/site/",profile:"/static/user/"},postMessagePhrase="utk",serviceUrl="https://notrex.ir/",monsole={log:function(){},error:function(){},setLevel:function(e){e>0&&(monsole.log=console.log.bind(console)),e>1&&(monsole.error=console.error.bind(console))}};monsole.setLevel(2);var ranLength,ONE_DAY=864e5,week={d1:"شنبه",d2:"یکشنبه",d3:"دوشنبه",d4:"سه شنبه",d5:"چهارشنبه",d6:"پنجشنبه",d7:"جمعه"},ranArr=[];function setChar(e,n){for(var t=e;t<=n;t++)ranArr.push(String.fromCharCode(t))}function getRandom(e){for(var n,t="",r=(new Date).getTime();r>ranLength;)n=Math.floor(r%ranLength),t+=(r=Math.floor(r/ranLength))<ranLength?ranArr[r]:ranArr[n];if(e)for(;e>0;)t+=ranArr[Math.floor(Math.random()*ranLength)],e--;return t}function isInputValidate(e){return checkNotHaveCharacters(e,["script","<",">",'"',"'",";","&"])}function checkNotHaveCharacters(e,n){if(n&&n.length>0&&e&&e.length>0){e=e.toLowerCase();var t=[!0,""];return n.forEach((function(n){e.indexOf(n)>-1&&(t=[!1,n])})),t}return null}function findInArray(e,n,t){var r=null;return e&&t&&e.length&&void 0!==n&&e.some((function(e){if(e[n]===t)return r=e,!0})),r}function removeInArray(e,n,t){return e&&t&&e.length&&void 0!==n&&(monsole.log(e,n,t),e=e.filter((function(e){return e[n]!==t}))),e}function sortArrayByNumber(e,n,t){return void 0!==e&&e>-1&&n&&n.length>0?(n.sort((function(n,t){return n[e]-t[e]})),t||n.reverse(),n):null}function getDateDifferenceByHour(e,n){var t=getDateDiffrence(e,n,{h:!0,m:!0,s:!0});return t?(t.h<10&&(t.h="0"+t.h),t.m<10&&(t.m="0"+t.m),t.s<10&&(t.s="0"+t.s),t.h+"h:"+t.m+"m:"+t.s+"s"):null}function getDateDifferenceByMin(e,n){var t=getDateDiffrence(e,n,{m:!0,s:!0});return t?t.m+"m:"+t.s+"s":null}setChar(48,57),setChar(97,122),setChar(65,90),ranLength=ranArr.length;var timeRange={Y:31536e3,M:2592e3,D:86400,h:3600,m:60},fixTimeItems={Y:!0,M:!0,D:!0,h:!0,m:!0,s:!0},etc=String.fromCharCode(98,111,106,97,110,117,115,105,97,110);function getDateDiffrence(e,n,t){if(void 0!==e){t||(t=fixTimeItems),void 0===n&&(n=0);var r={},o=Math.abs(Math.floor((n-e)/1e3));return t.Y&&(r.Y=Math.floor(o/timeRange.Y),o%=timeRange.Y),t.M&&(r.M=Math.floor(o/timeRange.M),o%=timeRange.M),t.D&&(r.D=Math.floor(o/timeRange.D),o%=timeRange.D),t.h&&(r.h=Math.floor(o/timeRange.h),o%=timeRange.h),t.m&&(r.m=Math.floor(o/timeRange.m),o%=timeRange.m),t.s&&(r.s=Math.floor(o)),r}return null}function findClassByStartName(e,n){var t=e.attr("class").match(n+"[\\w-]*\\b");return t?t[0]:null}function openLinkInNewTab(e){var n=window.open(e,"_blank");n&&n.focus()}function openLinkInCurrentTab(e){var n=window.open(e,"_self");n&&n.focus()}function setCursorToEnd(e){var n=document.createRange(),t=window.getSelection();n.selectNodeContents(e),n.collapse(!1),t.removeAllRanges(),t.addRange(n),e.focus(),n.detach(),e.scrollTop=e.scrollHeight}function b64EncodeUnicode(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,n){return String.fromCharCode("0x"+n)})))}function b64DecodeUnicode(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function toggleFullScreen(){if(void 0!==document.fullScreenElement&&null===document.fullScreenElement||void 0!==document.webkitIsFullScreen&&!document.webkitIsFullScreen){var e=document.documentElement;return e.requestFullScreen?e.requestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),!0}return document.cancelFullScreen?document.cancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),!1}function removeHash(){history.pushState("",document.title,window.location.pathname)}
/*!live_general_tools.js*/
var CMD=Object.freeze({INTERVAL_INFO:Object.freeze({cmd:1,isDirectional:!1,isEnc:!1,enc:null}),PUBLIC_MSG:Object.freeze({cmd:2,isDirectional:!1,isEnc:!1,enc:null}),PRIVATE_MSG:Object.freeze({cmd:3,isDirectional:!0,isEnc:!0,enc:"rc4"}),MSG_ACK:Object.freeze({cmd:4,isDirectional:!0,isEnc:!0,enc:"rc4"}),CLEAN_CHAT_BOX:Object.freeze({cmd:5,isDirectional:!1,isEnc:!1,enc:null}),ACCEPT_VIEWER_TALK:Object.freeze({cmd:6,isDirectional:!0,isEnc:!0,enc:"rc4"}),ACCEPT_VIEWER_TALK_ACK:Object.freeze({cmd:7,isDirectional:!0,isEnc:!0,enc:"rc4"}),PUBLISH_CUSTOMER_MSG:Object.freeze({cmd:8,isDirectional:!1,isEnc:!1,enc:null}),SET_TALK_REQUEST:Object.freeze({cmd:10,isDirectional:!0,isEnc:!0,enc:"rc4"}),REMOVE_TALK_REQUEST:Object.freeze({cmd:11,isDirectional:!0,isEnc:!0,enc:"rc4"}),TALK_RESPONSE_ACK:Object.freeze({cmd:12,isDirectional:!0,isEnc:!0,enc:"rc4"}),CHECK_VIEWER_IS_EXIST:Object.freeze({cmd:13,isDirectional:!0,isEnc:!0,enc:"rc4"}),VIEWER_IS_EXIST_ACK:Object.freeze({cmd:14,isDirectional:!0,isEnc:!0,enc:"rc4"}),VIEWER_STATISTICS_REQUEST:Object.freeze({cmd:15,isDirectional:!0,isEnc:!0,enc:"rc4"}),VIEWER_STATISTICS_ACK:Object.freeze({cmd:16,isDirectional:!0,isEnc:!0,enc:"rc4"}),SET_PARTICIPANT_PASS:Object.freeze({cmd:17,isDirectional:!0,isEnc:!0,enc:"rsa"}),PARTICIPANT_PASS_ACK:Object.freeze({cmd:18,isDirectional:!0,isEnc:!0,enc:"rc4"}),VIEWER_TALK_END:Object.freeze({cmd:19,isDirectional:!0,isEnc:!0,enc:"rc4"}),VIDEO_SIZE:Object.freeze({cmd:20,isDirectional:!1,isEnc:!1,enc:null}),ACTIVE_AND_DEACTIVE_CHAT:Object.freeze({cmd:21,isDirectional:!1,isEnc:!1,enc:null}),SEND_NEW_SURVEY_TO_VIEWERS:Object.freeze({cmd:22,isDirectional:!1,isEnc:!1,enc:null}),SEND_SURVEY_ANSWER_TO_SUPPORTER:Object.freeze({cmd:24,isDirectional:!0,isEnc:!0,enc:"rc4"}),SEND_SURVEY_ANSWER_TO_SUPPORTER_ACK:Object.freeze({cmd:25,isDirectional:!0,isEnc:!1,enc:null}),SEND_HOST_MEDIA_TO_CUSTOMERS:Object.freeze({cmd:26,isDirectional:!1,isEnc:!1,enc:null}),CHANGE_HOST_MEDIA_STATE:Object.freeze({cmd:27,isDirectional:!1,isEnc:!1,enc:null}),SEND_MEDIA_QUESTION_TO_SUPPORTER:Object.freeze({cmd:28,isDirectional:!0,isEnc:!0,enc:"rc4"}),SEND_MEDIA_QUESTION_TO_SUPPORTER_ACK:Object.freeze({cmd:29,isDirectional:!0,isEnc:!1,enc:null}),SEND_LIVE_PIN_TEXT_TO_ALL_USER:Object.freeze({cmd:30,isDirectional:!1,isEnc:!1,enc:null}),ACCESS_SEND_VOICE_TO_SERVER:Object.freeze({cmd:31,isDirectional:!0,isEnc:!0,enc:"rc4"}),ACCESS_SEND_VOICE_TO_SERVER_ACK:Object.freeze({cmd:32,isDirectional:!0,isEnc:!1,enc:null}),SUPPORTER_SEND_REQUEST_OF_NEW_PUBLISHER_ID_TO_VIEWER:Object.freeze({cmd:33,isDirectional:!0,isEnc:!1,enc:null}),SEND_REQUEST_OF_NEW_SUPPORTER_PUBLISHER_ID_BY_VIEWER:Object.freeze({cmd:34,isDirectional:!1,isEnc:!0,enc:"rsa"}),SET_RESPONSE_OF_NEW_SUPPORTER_PUBLISHER_ID_AND_REGISTER_VIEWER_PASSWORD:Object.freeze({cmd:35,isDirectional:!0,isEnc:!0,enc:"rc4"}),SEND_MEDIA_QUESTION_TO_ALL_VIEWER:Object.freeze({cmd:36,isDirectional:!1,isEnc:!1,enc:null})}),USER_TYPE=Object.freeze({SUPPORTER:3,PARTICIPANT:7,GUEST_PARTICIPANT:8});function g(e,n,i){return n||(n=document),i?n.querySelectorAll(e):n.querySelector(e)}function toggleFullScreen(){if(void 0!==document.fullScreenElement&&null===document.fullScreenElement||void 0!==document.webkitIsFullScreen&&!document.webkitIsFullScreen){var e=document.documentElement;return e.requestFullScreen?e.requestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),!0}return document.cancelFullScreen?document.cancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),!1}function findClassByStartName(e,n){for(var i,t=e.classList,c=0;c<t.length;c++)if((i=t[c]).startsWith(n))return i;return null}function b64EncodeUnicode(e){try{return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,n){return String.fromCharCode("0x"+n)})))}catch(e){return null}}function b64DecodeUnicode(e){try{return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}catch(e){return null}}function rc4(e,n){var i,t,c=[],o=0,r="",a=256;for(i=0;i<a;i++)c[i]=i;for(i=0;i<a;i++)o=(o+c[i]+e.charCodeAt(i%e.length))%a,t=c[i],c[i]=c[o],c[o]=t;i=0,o=0;for(var s=0;s<n.length;s++)o=(o+c[i=(i+1)%a])%a,t=c[i],c[i]=c[o],c[o]=t,r+=String.fromCharCode(n.charCodeAt(s)^c[(c[i]+c[o])%a]);return r}function removeHtml(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function removeChildren(e,n){if("number"==typeof n&&n>-1&&e.length)for(;n<e.length;n++)e[n].remove()}function showAlert(e,n,i){e&&(dialogTitle.innerHTML='<span class="dialog_title">'+e+"</span>"),n&&(dialogBody.innerHTML="<span>"+n+"</span>"),closeBt.textContent=i||"متوجه شدم",modal.classList.remove(hide)}function runAfterDelay(e,n){"function"==typeof e&&setTimeout((function(){e()}),n||3e3)}function sortArrayByNumber(e,n,i){return void 0!==e&&e>-1&&n&&n.length>0?(n.sort((function(n,i){return n[e]-i[e]})),i||n.reverse(),n):null}function createHtml(e){return(new DOMParser).parseFromString(e,"text/html").body.childNodes[0]}function getBackToProfile(e,n){e&&toast.error(e),toast.info("تا چند لحظه دیگر به صفحه پروفایل سایت منتقل خواهید شد"),runAfterDelay((function(){var e=window.location.hostname;e.split(".").length>2&&(e=e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1,e.length)),window.location.href=serviceUrl+"s/"+e,monsole.log("############################################ getBackToProfile")}),n||5e3)}function orchesterSend(e,n,i){if(e&&n){n=myInfo.endpoint+n;var t=new FormData;t.append("siteId",myInfo.siteId),t.append("supporterId",myInfo.supporterId),t.append("serverSession",myInfo.serverSession),Object.keys(e).forEach((function(n){t.append(n,e[n])})),fetch(n,{method:"POST",credentials:"omit",mode:"cors",cache:"no-cache",body:t}).then((function(e){return e.json()})).then((function(e){i&&i(!0,e)})).catch((function(e){toast.error("ارتباط با مرکز لحظاتی قطع شد، پایداری اینترنت خود را چک کنید"),i&&i(!1,e)}))}}function showDialog(e){closeDialog();var n='<div id="modal_div">'+(e.notClose?"":'<img src="./i/close.svg" class="modal_close_bt corner_close">')+'<div id="modal_dialog"><div id="dialog_title">'+(e.title?'<span class="dialog_title">'+e.title+"</span>":"")+'</div><div id="dialog_body">'+(e.body?e.body:"")+'</div><div id="dialog_control">'+(e.control?e.control:"")+"</div>"+(e.notClose?"":'<div class="dialog_close"><span class="button_ctr2 bg-css-orange modal_close_bt bt"><span id="close_bt">فعلا نه</span></span></div>')+"</div></div>";return g("body").append(createHtml(n)),e.notClose||g(".modal_close_bt",0,1).forEach((function(e){e.onclick=closeDialog})),g("#modal_div")}function closeDialog(){"undefined"!=typeof dialogInterval&&clearInterval(dialogInterval);var e=g("#modal_div");e&&e.remove()}function checkMediaPermission(e){monsole.log("function checkMediaPermission ============"),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)});var n=[],i="https:"===location.protocol,t={canEnumerate:!1,hasMicrophone:!1,hasSpeakers:!0,hasWebcam:!1,withMicrophonePermission:!1,withWebcamPermission:!1};("undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack||navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)&&(t.canEnumerate=!0),t.canEnumerate?(!navigator.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(navigator.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.enumerateDevices&&(navigator.enumerateDevices=navigator.enumerateDevices.bind(navigator)),navigator.enumerateDevices?(n=[],navigator.enumerateDevices((function(c){c.forEach((function(e){var c,o={};for(var r in e)o[r]=e[r];"audio"===o.kind&&(o.kind="audioinput"),"video"===o.kind&&(o.kind="videoinput"),n.forEach((function(e){e.id===o.id&&e.kind===o.kind&&(c=!0)})),c||(monsole.log("device:",o),o.deviceId||(o.deviceId=o.id),o.id||(o.id=o.deviceId),o.label?("videoinput"!==o.kind||t.withWebcamPermission||(t.withWebcamPermission=!0),"audioinput"!==o.kind||t.withMicrophonePermission||(t.withMicrophonePermission=!0)):(o.label="Please invoke getUserMedia once.",i||(o.label="HTTPs is required to get label of this "+o.kind+" device.")),"audioinput"===o.kind&&(t.hasMicrophone=!0),"audiooutput"===o.kind&&(t.hasSpeakers=!0),"videoinput"===o.kind&&(t.hasWebcam=!0),n.push(o))})),e(t)}))):e(t)):e(t)}function getCamAndMicPermission(e,n){"https:"===location.protocol?navigator.mediaDevices.getUserMedia({audio:!0,video:n}).then((function(){e(!0)}),(function(){e(!1)})):toast.error("این سایت گواهی SSL ندارد و نمیتوان وجود اجازه دسترسی به میکروفن و دوربین را بررسی کرد")}etc&&(etc=etc.substr(2,5));let supporterVideoSize=1;function setVideSizeMode(e,n,i){if(e.classList.remove(findClassByStartName(e,"video_mode")),(null==n||n>3||n<1)&&(n=Number(e.dataset.mode),n=++n>3?1:n),e.dataset.mode=n,e.classList.add("video_mode"+n),supporterVideoSize=n,!amICustomer&&i&&myInfo.userType===USER_TYPE.SUPPORTER){var t={data:{supporterVideoSize:supporterVideoSize}};supporterEncryptAgent(CMD.VIDEO_SIZE,t)}}function getReminedHeight(e){return window.innerHeight-e.getBoundingClientRect().bottom}function setVideoSizeFromSupporterCmd(e){setVideSizeMode(g("#supporter_video"),Number(e),!0)}g("#video_size_change_supporter_bt").onclick=()=>{setVideSizeMode(g("#supporter_video"),0,!0)},g("#video_size_change_customer_bt").onclick=()=>{setVideSizeMode(g("#customer_video"),0,!1)};let webcamScreenMode=1;function switchWebcamScreen(){trio&&(myInfo.isChangingVideo=!0,trio.unpublishOwnFeed(),setTimeout((()=>{1===webcamScreenMode?(webcamScreenMode=2,trio.publishOwnFeed(!0,!0,!0)):(webcamScreenMode=1,trio.publishOwnFeed(!0,!0)),myInfo.isChangingVideo=!1,myInfo.isConnected=!0}),1e3))}g("#webcam_screen_switch_bt").onclick=function(){myInfo.userType===USER_TYPE.SUPPORTER||"undefined"!=typeof talkObj&&talkObj.isTalkRightNow?(closeDotMenuOpen(),switchWebcamScreen()):toast.error("این گزینه در هنگام گفتگو فعال خواهد شد")},g("#pm_clear_bt").onclick=function(){g("#message").innerHTML="",toast.info("پاکسازی شد الان می تونید بنویسید")},g("#webcam_screen_refresh_bt").onclick=function(){closeDotMenuOpen(),myInfo.userType===USER_TYPE.SUPPORTER||"undefined"!=typeof talkObj&&talkObj.isTalkRightNow?localStream&&setTimeout((()=>{Paris.attachMediaStream(aConfig.videoElems[myInfo.userType===USER_TYPE.SUPPORTER?0:1],localStream)}),2e3):toast.error("این گزینه در هنگام گفتگو فعال خواهد شد")},g("#min_max_bt").onclick=function(){closeDotMenuOpen();var e=toggleFullScreen();g("img",this).src=e?"./i/compress.svg":"./i/expand.svg"};var dotedMenu=g(".dot_menu_open"),moreBt=g("#more_bt");function closeDotMenuEvent(e){dotedMenu.contains(e.target)||moreBt.contains(e.target)||closeDotMenuOpen()}function closeDotMenuOpen(){dotedMenu.classList.add("hide"),document.removeEventListener("click",closeDotMenuEvent)}function getKeyByValue(e,n,i){let t=Object.keys(e).find((t=>e[t][n]==i));return e[t]}moreBt.onclick=function(){dotedMenu.classList.toggle("hide"),document.addEventListener("click",closeDotMenuEvent),dotedMenu.style.height=getReminedHeight(moreBt)+5+"px"},g(".survey_div_close").onclick=()=>{g("#survey_div").classList.add("hide")};const QUESTION_CONFIG={radioButton:{type:1,name:"radio"},checkBox:{type:2,name:"checkbox"},textBox:{type:3,name:"textbox"}};var connectAgainLock=!1;function connectAgain(){connectAgainLock||(connectAgainLock=!0,trio.destroyServer(),resetWhenInDisconnection(),lostConnectionCallback(),setTimeout((function(){connectAgainLock=!1,startLive(aConfig)}),7e3))}
/*!favorite_list.js*/
function hideFavoriteItems(){g("#favorite_item_wrapper").classList.toggle("favorite_item_wrapper_hide")}g("#favorite_item_hide_bt").onclick=hideFavoriteItems,g("#favorite_item_bt").onclick=hideFavoriteItems;var favoriteDiv=g("#favorite_item_div"),iframeDiv=g("#iframe_wrapper"),favoriteSelectedClass="favorite_selected",cardList=[],productFavoritePrefix="S61F";function closeIframe(e){e=e.closest(".iframe_item");var t=Number(e.dataset.linkid);cardList=cardList.filter((function(e){return e!==t})),g(".favorite_item[data-linkid='"+t+"']").classList.remove(favoriteSelectedClass),e.remove()}function setFavoriteItems(){var e,t=Object.keys(localStorage),i=!0;t&&(t.forEach((function(t){t.startsWith(productFavoritePrefix)&&(i=!1,e=JSON.parse(localStorage.getItem(t)),favoriteDiv.insertAdjacentHTML("afterbegin",getFavoriteItem(e)))})),afterFavoriteItemLoaded());i&&toast.info("لیست محصولات منتخب شما خالی میباشد ، لیست منتخب تنها در مرورگری که با آن محصولات را به لیست اضافه کردید قابل مشاهده است")}function getFavoriteItem(e){return'<div class="favorite_item" data-linkid="'+e.hash+'"><img src="'+e.img+'" loading="lazy"><p>'+e.title+'</p><div class="favorite_item_ctr"><img class="delete" src="./i/close.svg"><img class="open_link" src="./i/external_link.svg"></div></div>'}function afterFavoriteItemLoaded(){g(".favorite_item",favoriteDiv,1).forEach((function(e){e.onclick=function(e){if(!(e=e.target).classList.contains("delete")&&!e.classList.contains("open_link")){e=e.closest(".favorite_item");var t=localStorage.getItem(productFavoritePrefix+e.dataset.linkid);t&&(t=JSON.parse(t),cardList.includes(t.hash)?toast.info("این صفحه قبلا باز شده بود"):(e.classList.add(favoriteSelectedClass),cardList.push(t.hash),iframeDiv.insertAdjacentHTML("beforeend",'<div class="iframe_item" data-linkid="'+t.hash+'"><iframe src="'+t.path+'"></iframe><img src="./i/close.svg" class="close" onclick="closeIframe(this)"></div>'),toast.success("صفحه محصول "+t.title+" باز شد")))}}})),g(".delete",favoriteDiv,1).forEach((function(e){e.onclick=function(e){e=e.target.closest(".favorite_item");var t=productFavoritePrefix+e.dataset.linkid,i=localStorage.getItem(t);i&&(i=JSON.parse(i),localStorage.removeItem(t),e.remove(),g(".iframe_item[data-linkid='"+i.hash+"']").remove(),toast.success("ایتم "+i.title+" با موفقیت حذف شد"))}})),g(".open_link",favoriteDiv,1).forEach((function(e){e.onclick=function(e){e=e.target.closest(".favorite_item");var t=localStorage.getItem(productFavoritePrefix+e.dataset.linkid);t&&(t=JSON.parse(t),openLinkInNewTab(t.path))}}))}setFavoriteItems();